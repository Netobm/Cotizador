<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Autos Seminuevos Fundadores</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 2rem;
      background: #f4f4f4;
      color: #222;
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }
    .formulario {
      background: #fff;
      padding: 1.5rem;
      margin-bottom: 2rem;
      border-radius: 16px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .formulario h2 {
      margin-top: 0;
      color: #0d47a1;
    }
    label {
      display: block;
      margin-top: 0.5rem;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .botones {
      margin-top: 1rem;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    button {
      padding: 0.5rem 1rem;
      background-color: #0d47a1;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background-color: #08306b;
    }
    .resultado {
      margin-top: 1rem;
      background: #e3f2fd;
      padding: 1rem;
      border-radius: 12px;
    }
    .cuotas {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 1rem;
    }
    .cuota {
      background: #bbdefb;
      padding: 10px;
      border-radius: 10px;
      flex: 1 1 100px;
      text-align: center;
      font-weight: bold;
    }
    #comparador {
      display: none;
    }
    .footer {
      text-align: center;
      font-size: 0.9rem;
      color: #555;
      margin-top: 1rem;
    }
  </style>
</head>
<body>

<h1>Autos Seminuevos Fundadores</h1>

<div class="formulario" id="form1">
  <h2>Auto A</h2>
  <label>Marca:</label><input type="text" id="marca1" />
  <label>Modelo:</label><input type="text" id="modelo1" />
  <label>A침o:</label><input type="number" id="anio1" />
  <label>Precio:</label><input type="number" id="precio1" />
  <label>Enganche:</label><input type="number" id="enganche1" />
  <div class="botones">
    <button onclick="cotizar('1')">Generar Cotizaci칩n</button>
    <button onclick="descargarImagen('1')">Descargar Imagen</button>
  </div>
  <div class="resultado" id="resultado1" style="display:none;"></div>
</div>

<button onclick="mostrarComparador()">游대 Comparar con otro auto</button>

<div class="formulario" id="comparador">
  <h2>Auto B</h2>
  <label>Marca:</label><input type="text" id="marca2" />
  <label>Modelo:</label><input type="text" id="modelo2" />
  <label>A침o:</label><input type="number" id="anio2" />
  <label>Precio:</label><input type="number" id="precio2" />
  <label>Enganche:</label><input type="number" id="enganche2" />
  <div class="botones">
    <button onclick="cotizar('2')">Generar Cotizaci칩n</button>
    <button onclick="descargarImagen('2')">Descargar Imagen</button>
  </div>
  <div class="resultado" id="resultado2" style="display:none;"></div>
</div>

<button style="margin-top: 1rem;" onclick="limpiar()">Limpiar Formulario</button>

<script>
  function mostrarComparador() {
    document.getElementById('comparador').style.display = 'block';
  }

  function cotizar(num) {
    const marca = document.getElementById('marca' + num).value;
    const modelo = document.getElementById('modelo' + num).value;
    const anio = document.getElementById('anio' + num).value;
    const precio = parseFloat(document.getElementById('precio' + num).value);
    const enganche = parseFloat(document.getElementById('enganche' + num).value);

    if (!marca || !modelo || !anio || isNaN(precio) || isNaN(enganche)) {
      alert('Completa todos los campos');
      return;
    }

    const plazoMeses = [12, 24, 36, 48, 60];
    const resultado = document.getElementById('resultado' + num);
    resultado.innerHTML = `
      <h3>${marca} ${modelo} (${anio})</h3>
      <p><strong>Precio:</strong> $${precio.toLocaleString()}</p>
      <p><strong>Enganche:</strong> $${enganche.toLocaleString()}</p>
      <div class="cuotas">
        ${plazoMeses.map(meses => {
          let mensualidad = ((precio - enganche) * 1.12) / meses;
          return `<div class="cuota">${meses} meses<br>$${mensualidad.toFixed(2)}</div>`;
        }).join('')}
      </div>
      <div class="footer">*Precio sujeto a aprobaci칩n</div>
    `;
    resultado.style.display = 'block';
  }

  function descargarImagen(num) {
    const resultado = document.getElementById('resultado' + num);
    html2canvas(resultado).then(canvas => {
      canvas.toBlob(blob => {
        const link = document.createElement('a');
        link.download = 'cotizacion_auto' + num + '.png';
        link.href = URL.createObjectURL(blob);
        link.click();

        // Copiar al portapapeles
        navigator.clipboard.write([
          new ClipboardItem({ 'image/png': blob })
        ]).then(() => {
          alert('Imagen copiada al portapapeles');
        }, err => {
          alert('No se pudo copiar al portapapeles');
        });
      });
    });
  }

  function limpiar() {
    ['1','2'].forEach(num => {
      document.getElementById('marca' + num).value = '';
      document.getElementById('modelo' + num).value = '';
      document.getElementById('anio' + num).value = '';
      document.getElementById('precio' + num).value = '';
      document.getElementById('enganche' + num).value = '';
      document.getElementById('resultado' + num).style.display = 'none';
      document.getElementById('resultado' + num).innerHTML = '';
    });
    document.getElementById('comparador').style.display = 'none';
  }
</script>

</body>
</html>
